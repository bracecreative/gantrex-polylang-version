/*! For license information please see document-picker.js.LICENSE.txt */
!function(){var t={440:function(t,e){var o,n;n=this,void 0===(o=function(){return n.svg4everybody=function(){function t(t,e,o){if(o){var n=document.createDocumentFragment(),r=!e.hasAttribute("viewBox")&&o.getAttribute("viewBox");r&&e.setAttribute("viewBox",r);for(var i=o.cloneNode(!0);i.childNodes.length;)n.appendChild(i.firstChild);t.appendChild(n)}}function e(e){e.onreadystatechange=function(){if(4===e.readyState){var o=e._cachedDocument;o||((o=e._cachedDocument=document.implementation.createHTMLDocument("")).body.innerHTML=e.responseText,e._cachedTarget={}),e._embeds.splice(0).map((function(n){var r=e._cachedTarget[n.id];r||(r=e._cachedTarget[n.id]=o.getElementById(n.id)),t(n.parent,n.svg,r)}))}},e.onreadystatechange()}function o(t){for(var e=t;"svg"!==e.nodeName.toLowerCase()&&(e=e.parentNode););return e}return function(n){var r,i=Object(n),a=window.top!==window.self;r="polyfill"in i?i.polyfill:/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/.test(navigator.userAgent)||(navigator.userAgent.match(/\bEdge\/12\.(\d+)\b/)||[])[1]<10547||(navigator.userAgent.match(/\bAppleWebKit\/(\d+)\b/)||[])[1]<537||/\bEdge\/.(\d+)\b/.test(navigator.userAgent)&&a;var c={},s=window.requestAnimationFrame||setTimeout,u=document.getElementsByTagName("use"),d=0;r&&function n(){for(var a=0;a<u.length;){var l=u[a],p=l.parentNode,h=o(p),f=l.getAttribute("xlink:href")||l.getAttribute("href");if(!f&&i.attributeName&&(f=l.getAttribute(i.attributeName)),h&&f){if(r)if(!i.validate||i.validate(f,h,l)){p.removeChild(l);var g=f.split("#"),m=g.shift(),y=g.join("#");if(m.length){var v=c[m];v||((v=c[m]=new XMLHttpRequest).open("GET",m),v.send(),v._embeds=[]),v._embeds.push({parent:p,svg:h,id:y}),e(v)}else t(p,h,document.getElementById(y))}else++a,++d}else++a}(!u.length||u.length-d>0)&&s(n,67)}()}}()}.apply(e,[]))||(t.exports=o)}},e={};!function(){"use strict";var t,e=jQuery,o=function(t,o){var n=new URL(window.ajaxUrl);return n.searchParams.append("action",t),e.post({url:n.toString(),data:JSON.stringify(o),contentType:"application/json; charset=utf-8",dataType:"json"})},n=function(){function t(){this.loadingKeys=[]}return t.prototype.startLoading=function(t){void 0===t&&(t="default"),this.loadingKeys.includes(t)||(this.loadingKeys.push(t),this.drawLoader())},t.prototype.stopLoading=function(t){void 0===t&&(t="default");var e=this.loadingKeys.indexOf(t);e<0||(this.loadingKeys.splice(e,1),this.drawLoader())},t.prototype.drawLoader=function(){this.$loader&&(this.loadingKeys.length?this.$loader.show():this.$loader.hide())},t}(),r=(t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)},function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}),i=jQuery,a=window.popupCloseClass,c=function(t){function e(e,o){var n=t.call(this)||this;return n.id=e,n.$target=o,n}return r(e,t),e.prototype.request=function(){var t=this;this.startLoading();var e=window.localStorage.getItem("doc-data-capture");o("document_download_url",{id:this.id,token:e}).then((function(e){if(t.stopLoading(),!e.success)throw new Error(e.data);return e.data.form?t.presentForm(e.data.form):e.data.url?t.download():void 0})).catch((function(t){return console.error("An error occured: ",t)}))},e.prototype.presentForm=function(t){this.$form=i(t),this.$form.find(".".concat(a)).on("click",this.closeForm.bind(this)),i(document).one("gform_confirmation_loaded",this.onConfirmationLoaded.bind(this)),i("body").append(this.$form)},e.prototype.closeForm=function(){this.$form&&this.$form.remove()},e.prototype.onConfirmationLoaded=function(t,e){var o=window.dataCaptureResultToken;o&&(window.localStorage.setItem("doc-data-capture",o),this.request(),this.closeForm())},e.prototype.download=function(){var t=window.ajaxUrl+"?action=document_download&id="+this.id;i("<iframe />",{src:t}).css({visibility:"hidden",display:"none"}).appendTo(this.$target)},e}(n),s=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),u=jQuery,d=window.documentPickerProps,l=d.documentLoaderClassName,p=d.languageLoaderClassName,h=d.languageClassName,f=d.selectClassName,g=function(t){function e(e){var o=t.call(this)||this;return o.$elem=e,o.filters=o.$elem.data("filters")||{},o.$button=o.$elem.find('button[type="button"]'),o.$loader=o.$elem.find(".".concat(p)),o.setCurrentDoc(),o.attach(),o.queryDom(),o}return s(e,t),e.prototype.queryDom=function(){this.$language=this.$elem.find(".".concat(h)),this.$language.find("select").select2(),this.$select=this.$elem.find(".".concat(f)),this.$select.find("select").select2()},e.prototype.onLangChange=function(t){var e=this,n=t.target,r=u(n),i=String(r.val());this.setCurrentDoc(),this.$select&&this.$select.hide(),this.startLoading(),o("document_picker",{language:i,filters:this.filters}).then((function(t){if(!t.success)throw new Error(t.data);e.$select&&e.$select.replaceWith(u(t.data.markup)),e.queryDom(),e.stopLoading()})).catch((function(t){return console.error("An error occured: ",t)}))},e.prototype.onDocumentChange=function(t){var e=t.target,o=u(e).val();this.setCurrentDoc(Number(o))},e.prototype.onButtonClick=function(t){if(t.preventDefault(),this.currentDocId){var e=new c(this.currentDocId,u(t.target));e.$loader=this.$elem.find(".".concat(l)),e.request()}},e.prototype.setCurrentDoc=function(t){this.currentDocId=Number(t),this.$button.toggle(!!this.currentDocId)},e.prototype.attach=function(){this.$elem.on("change",".".concat(h),this.onLangChange.bind(this)),this.$elem.on("change",".".concat(f),this.onDocumentChange.bind(this)),this.$button.on("click",this.onButtonClick.bind(this))},e}(n),m=g;jQuery((function(t){t(".".concat(window.documentPickerProps.rootClassName)).each((function(e,o){var n=t(o);n.data("document-picker",new m(n))}))}))}(),function o(n){var r=e[n];if(void 0!==r)return r.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,o),i.exports}(440)({})}();
//# sourceMappingURL=document-picker.js.map