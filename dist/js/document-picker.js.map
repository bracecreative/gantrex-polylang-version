{"version":3,"file":"js/document-picker.js","mappings":"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","sources":["webpack://custom-wp/./node_modules/svg4everybody/dist/svg4everybody.js","webpack://custom-wp/webpack/bootstrap","webpack://custom-wp/./src/js/api.ts","webpack://custom-wp/./src/js/DocumentDownloader.ts","webpack://custom-wp/./src/js/LoaderQueue.ts","webpack://custom-wp/./src/js/DocumentPicker.ts","webpack://custom-wp/./src/js/document-picker.ts","webpack://custom-wp/./node_modules/svg-spritemap-webpack-plugin/svg4everybody-helper.js"],"sourcesContent":["!function(root, factory) {\n    \"function\" == typeof define && define.amd ? // AMD. Register as an anonymous module unless amdModuleId is set\n    define([], function() {\n        return root.svg4everybody = factory();\n    }) : \"object\" == typeof module && module.exports ? // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory() : root.svg4everybody = factory();\n}(this, function() {\n    /*! svg4everybody v2.1.9 | github.com/jonathantneal/svg4everybody */\n    function embed(parent, svg, target) {\n        // if the target exists\n        if (target) {\n            // create a document fragment to hold the contents of the target\n            var fragment = document.createDocumentFragment(), viewBox = !svg.hasAttribute(\"viewBox\") && target.getAttribute(\"viewBox\");\n            // conditionally set the viewBox on the svg\n            viewBox && svg.setAttribute(\"viewBox\", viewBox);\n            // copy the contents of the clone into the fragment\n            for (// clone the target\n            var clone = target.cloneNode(!0); clone.childNodes.length; ) {\n                fragment.appendChild(clone.firstChild);\n            }\n            // append the fragment into the svg\n            parent.appendChild(fragment);\n        }\n    }\n    function loadreadystatechange(xhr) {\n        // listen to changes in the request\n        xhr.onreadystatechange = function() {\n            // if the request is ready\n            if (4 === xhr.readyState) {\n                // get the cached html document\n                var cachedDocument = xhr._cachedDocument;\n                // ensure the cached html document based on the xhr response\n                cachedDocument || (cachedDocument = xhr._cachedDocument = document.implementation.createHTMLDocument(\"\"), \n                cachedDocument.body.innerHTML = xhr.responseText, xhr._cachedTarget = {}), // clear the xhr embeds list and embed each item\n                xhr._embeds.splice(0).map(function(item) {\n                    // get the cached target\n                    var target = xhr._cachedTarget[item.id];\n                    // ensure the cached target\n                    target || (target = xhr._cachedTarget[item.id] = cachedDocument.getElementById(item.id)), \n                    // embed the target into the svg\n                    embed(item.parent, item.svg, target);\n                });\n            }\n        }, // test the ready state change immediately\n        xhr.onreadystatechange();\n    }\n    function svg4everybody(rawopts) {\n        function oninterval() {\n            // while the index exists in the live <use> collection\n            for (// get the cached <use> index\n            var index = 0; index < uses.length; ) {\n                // get the current <use>\n                var use = uses[index], parent = use.parentNode, svg = getSVGAncestor(parent), src = use.getAttribute(\"xlink:href\") || use.getAttribute(\"href\");\n                if (!src && opts.attributeName && (src = use.getAttribute(opts.attributeName)), \n                svg && src) {\n                    if (polyfill) {\n                        if (!opts.validate || opts.validate(src, svg, use)) {\n                            // remove the <use> element\n                            parent.removeChild(use);\n                            // parse the src and get the url and id\n                            var srcSplit = src.split(\"#\"), url = srcSplit.shift(), id = srcSplit.join(\"#\");\n                            // if the link is external\n                            if (url.length) {\n                                // get the cached xhr request\n                                var xhr = requests[url];\n                                // ensure the xhr request exists\n                                xhr || (xhr = requests[url] = new XMLHttpRequest(), xhr.open(\"GET\", url), xhr.send(), \n                                xhr._embeds = []), // add the svg and id as an item to the xhr embeds list\n                                xhr._embeds.push({\n                                    parent: parent,\n                                    svg: svg,\n                                    id: id\n                                }), // prepare the xhr ready state change event\n                                loadreadystatechange(xhr);\n                            } else {\n                                // embed the local id into the svg\n                                embed(parent, svg, document.getElementById(id));\n                            }\n                        } else {\n                            // increase the index when the previous value was not \"valid\"\n                            ++index, ++numberOfSvgUseElementsToBypass;\n                        }\n                    }\n                } else {\n                    // increase the index when the previous value was not \"valid\"\n                    ++index;\n                }\n            }\n            // continue the interval\n            (!uses.length || uses.length - numberOfSvgUseElementsToBypass > 0) && requestAnimationFrame(oninterval, 67);\n        }\n        var polyfill, opts = Object(rawopts), newerIEUA = /\\bTrident\\/[567]\\b|\\bMSIE (?:9|10)\\.0\\b/, webkitUA = /\\bAppleWebKit\\/(\\d+)\\b/, olderEdgeUA = /\\bEdge\\/12\\.(\\d+)\\b/, edgeUA = /\\bEdge\\/.(\\d+)\\b/, inIframe = window.top !== window.self;\n        polyfill = \"polyfill\" in opts ? opts.polyfill : newerIEUA.test(navigator.userAgent) || (navigator.userAgent.match(olderEdgeUA) || [])[1] < 10547 || (navigator.userAgent.match(webkitUA) || [])[1] < 537 || edgeUA.test(navigator.userAgent) && inIframe;\n        // create xhr requests object\n        var requests = {}, requestAnimationFrame = window.requestAnimationFrame || setTimeout, uses = document.getElementsByTagName(\"use\"), numberOfSvgUseElementsToBypass = 0;\n        // conditionally start the interval if the polyfill is active\n        polyfill && oninterval();\n    }\n    function getSVGAncestor(node) {\n        for (var svg = node; \"svg\" !== svg.nodeName.toLowerCase() && (svg = svg.parentNode); ) {}\n        return svg;\n    }\n    return svg4everybody;\n});","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","var $ = jQuery;\nvar api = {\n    post: function (action, data) {\n        var postUrl = new URL(window.ajaxUrl);\n        postUrl.searchParams.append('action', action);\n        return $.post({\n            url: postUrl.toString(),\n            data: JSON.stringify(data),\n            contentType: 'application/json; charset=utf-8',\n            dataType: 'json'\n        });\n    },\n    get: function (url) {\n        return $.get({ url: url });\n    }\n};\nexport default api;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport api from './api';\nimport LoaderQueue from './LoaderQueue';\nvar $ = jQuery;\nvar popupCloseClass = window.popupCloseClass;\nvar DocumentDownloader = /** @class */ (function (_super) {\n    __extends(DocumentDownloader, _super);\n    function DocumentDownloader(id, $target) {\n        var _this = _super.call(this) || this;\n        _this.id = id;\n        _this.$target = $target;\n        return _this;\n    }\n    DocumentDownloader.prototype.request = function () {\n        var _this = this;\n        this.startLoading();\n        var token = window.localStorage.getItem('doc-data-capture');\n        api.post('document_download_url', { id: this.id, token: token })\n            .then(function (result) {\n            _this.stopLoading();\n            if (!result.success) {\n                throw new Error(result.data);\n            }\n            if (result.data.form) {\n                return _this.presentForm(result.data.form);\n            }\n            if (result.data.url) {\n                return _this.download();\n            }\n        })\n            .catch(function (err) { return console.error('An error occured: ', err); });\n    };\n    DocumentDownloader.prototype.presentForm = function (markup) {\n        this.$form = $(markup);\n        this.$form.find(\".\".concat(popupCloseClass)).on('click', this.closeForm.bind(this));\n        $(document).one('gform_confirmation_loaded', this.onConfirmationLoaded.bind(this));\n        $('body').append(this.$form);\n    };\n    DocumentDownloader.prototype.closeForm = function () {\n        if (!this.$form) {\n            return;\n        }\n        this.$form.remove();\n    };\n    DocumentDownloader.prototype.onConfirmationLoaded = function (e, formId) {\n        var dataCaptureResultToken = window.dataCaptureResultToken;\n        if (!dataCaptureResultToken) {\n            return;\n        }\n        window.localStorage.setItem('doc-data-capture', dataCaptureResultToken);\n        this.request();\n        this.closeForm();\n    };\n    DocumentDownloader.prototype.download = function () {\n        var url = window.ajaxUrl + '?action=document_download&id=' + this.id;\n        var $iframe = $('<iframe />', {\n            src: url\n        }).css({\n            visibility: 'hidden',\n            display: 'none'\n        });\n        $iframe.appendTo(this.$target);\n    };\n    return DocumentDownloader;\n}(LoaderQueue));\nexport default DocumentDownloader;\n","var LoaderQueue = /** @class */ (function () {\n    function LoaderQueue() {\n        this.loadingKeys = [];\n    }\n    LoaderQueue.prototype.startLoading = function (key) {\n        if (key === void 0) { key = 'default'; }\n        if (this.loadingKeys.includes(key)) {\n            return;\n        }\n        this.loadingKeys.push(key);\n        this.drawLoader();\n    };\n    LoaderQueue.prototype.stopLoading = function (key) {\n        if (key === void 0) { key = 'default'; }\n        var index = this.loadingKeys.indexOf(key);\n        if (index < 0) {\n            return;\n        }\n        this.loadingKeys.splice(index, 1);\n        this.drawLoader();\n    };\n    LoaderQueue.prototype.drawLoader = function () {\n        if (!this.$loader) {\n            return;\n        }\n        if (this.loadingKeys.length) {\n            this.$loader.show();\n        }\n        else {\n            this.$loader.hide();\n        }\n    };\n    return LoaderQueue;\n}());\nexport default LoaderQueue;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport api from './api';\nimport DocumentDownloader from './DocumentDownloader';\nimport LoaderQueue from './LoaderQueue';\nvar $ = jQuery;\nvar _a = window.documentPickerProps, documentLoaderClassName = _a.documentLoaderClassName, languageLoaderClassName = _a.languageLoaderClassName, languageClassName = _a.languageClassName, selectClassName = _a.selectClassName;\nvar DocumentPicker = /** @class */ (function (_super) {\n    __extends(DocumentPicker, _super);\n    function DocumentPicker($elem) {\n        var _this = _super.call(this) || this;\n        _this.$elem = $elem;\n        _this.filters = _this.$elem.data('filters') || {};\n        _this.$button = _this.$elem.find('button[type=\"button\"]');\n        _this.$loader = _this.$elem.find(\".\".concat(languageLoaderClassName));\n        _this.setCurrentDoc();\n        _this.attach();\n        _this.queryDom();\n        return _this;\n    }\n    DocumentPicker.prototype.queryDom = function () {\n        this.$language = this.$elem.find(\".\".concat(languageClassName));\n        this.$language.find('select').select2();\n        this.$select = this.$elem.find(\".\".concat(selectClassName));\n        this.$select.find('select').select2();\n    };\n    DocumentPicker.prototype.onLangChange = function (_a) {\n        var _this = this;\n        var target = _a.target;\n        var $target = $(target);\n        var language = String($target.val());\n        this.setCurrentDoc();\n        if (this.$select) {\n            this.$select.hide();\n        }\n        this.startLoading();\n        api.post('document_picker', { language: language, filters: this.filters })\n            .then(function (result) {\n            if (!result.success) {\n                throw new Error(result.data);\n            }\n            if (_this.$select) {\n                _this.$select.replaceWith($(result.data.markup));\n            }\n            _this.queryDom();\n            _this.stopLoading();\n        })\n            .catch(function (err) { return console.error('An error occured: ', err); });\n    };\n    DocumentPicker.prototype.onDocumentChange = function (_a) {\n        var target = _a.target;\n        var value = $(target).val();\n        this.setCurrentDoc(Number(value));\n    };\n    DocumentPicker.prototype.onButtonClick = function (e) {\n        e.preventDefault();\n        if (!this.currentDocId) {\n            return;\n        }\n        var downloader = new DocumentDownloader(this.currentDocId, $(e.target));\n        downloader.$loader = this.$elem.find(\".\".concat(documentLoaderClassName));\n        downloader.request();\n    };\n    DocumentPicker.prototype.setCurrentDoc = function (id) {\n        this.currentDocId = Number(id);\n        this.$button.toggle(!!this.currentDocId);\n    };\n    DocumentPicker.prototype.attach = function () {\n        this.$elem.on('change', \".\".concat(languageClassName), this.onLangChange.bind(this));\n        this.$elem.on('change', \".\".concat(selectClassName), this.onDocumentChange.bind(this));\n        this.$button.on('click', this.onButtonClick.bind(this));\n    };\n    return DocumentPicker;\n}(LoaderQueue));\nexport default DocumentPicker;\n","import '../sass/select2/core.scss';\nimport DocumentPicker from './DocumentPicker';\njQuery(function ($) {\n    var $documentPickers = $(\".\".concat(window.documentPickerProps.rootClassName));\n    $documentPickers.each(function (_, el) {\n        var $el = $(el);\n        $el.data('document-picker', new DocumentPicker($el));\n    });\n});\n","require('svg4everybody')({});\n"],"names":["this","root","svg4everybody","embed","parent","svg","target","fragment","document","createDocumentFragment","viewBox","hasAttribute","getAttribute","setAttribute","clone","cloneNode","childNodes","length","appendChild","firstChild","loadreadystatechange","xhr","onreadystatechange","readyState","cachedDocument","_cachedDocument","implementation","createHTMLDocument","body","innerHTML","responseText","_cachedTarget","_embeds","splice","map","item","id","getElementById","getSVGAncestor","node","nodeName","toLowerCase","parentNode","rawopts","polyfill","opts","Object","inIframe","window","top","self","test","navigator","userAgent","match","requests","requestAnimationFrame","setTimeout","uses","getElementsByTagName","numberOfSvgUseElementsToBypass","oninterval","index","use","src","attributeName","validate","removeChild","srcSplit","split","url","shift","join","XMLHttpRequest","open","send","push","factory","__webpack_module_cache__","extendStatics","$","jQuery","action","data","postUrl","URL","ajaxUrl","searchParams","append","post","toString","JSON","stringify","contentType","dataType","LoaderQueue","loadingKeys","prototype","startLoading","key","includes","drawLoader","stopLoading","indexOf","$loader","show","hide","__extends","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","call","TypeError","String","__","constructor","create","popupCloseClass","_super","DocumentDownloader","$target","_this","request","token","localStorage","getItem","api","then","result","success","Error","form","presentForm","download","catch","err","console","error","markup","$form","find","concat","on","closeForm","bind","one","onConfirmationLoaded","remove","e","formId","dataCaptureResultToken","setItem","css","visibility","display","appendTo","_a","documentPickerProps","documentLoaderClassName","languageLoaderClassName","languageClassName","selectClassName","DocumentPicker","$elem","filters","$button","setCurrentDoc","attach","queryDom","$language","select2","$select","onLangChange","language","val","replaceWith","onDocumentChange","value","Number","onButtonClick","preventDefault","currentDocId","downloader","toggle","rootClassName","each","_","el","$el","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__"],"sourceRoot":""}