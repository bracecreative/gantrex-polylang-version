/*! For license information please see location-selector.js.LICENSE.txt */
!function(){var t={440:function(t,e){var n,o;o=this,void 0===(n=function(){return o.svg4everybody=function(){function t(t,e,n){if(n){var o=document.createDocumentFragment(),a=!e.hasAttribute("viewBox")&&n.getAttribute("viewBox");a&&e.setAttribute("viewBox",a);for(var r=n.cloneNode(!0);r.childNodes.length;)o.appendChild(r.firstChild);t.appendChild(o)}}function e(e){e.onreadystatechange=function(){if(4===e.readyState){var n=e._cachedDocument;n||((n=e._cachedDocument=document.implementation.createHTMLDocument("")).body.innerHTML=e.responseText,e._cachedTarget={}),e._embeds.splice(0).map((function(o){var a=e._cachedTarget[o.id];a||(a=e._cachedTarget[o.id]=n.getElementById(o.id)),t(o.parent,o.svg,a)}))}},e.onreadystatechange()}function n(t){for(var e=t;"svg"!==e.nodeName.toLowerCase()&&(e=e.parentNode););return e}return function(o){var a,r=Object(o),i=window.top!==window.self;a="polyfill"in r?r.polyfill:/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/.test(navigator.userAgent)||(navigator.userAgent.match(/\bEdge\/12\.(\d+)\b/)||[])[1]<10547||(navigator.userAgent.match(/\bAppleWebKit\/(\d+)\b/)||[])[1]<537||/\bEdge\/.(\d+)\b/.test(navigator.userAgent)&&i;var c={},s=window.requestAnimationFrame||setTimeout,l=document.getElementsByTagName("use"),d=0;a&&function o(){for(var i=0;i<l.length;){var u=l[i],p=u.parentNode,f=n(p),h=u.getAttribute("xlink:href")||u.getAttribute("href");if(!h&&r.attributeName&&(h=u.getAttribute(r.attributeName)),f&&h){if(a)if(!r.validate||r.validate(h,f,u)){p.removeChild(u);var g=h.split("#"),v=g.shift(),m=g.join("#");if(v.length){var y=c[v];y||((y=c[v]=new XMLHttpRequest).open("GET",v),y.send(),y._embeds=[]),y._embeds.push({parent:p,svg:f,id:m}),e(y)}else t(p,f,document.getElementById(m))}else++i,++d}else++i}(!l.length||l.length-d>0)&&s(o,67)}()}}()}.apply(e,[]))||(t.exports=n)}},e={};!function(){"use strict";var t,e=jQuery,n=function(t,n){var o=new URL(window.ajaxUrl);return o.searchParams.append("action",t),e.post({url:o.toString(),data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"json"})},o=function(){function t(){this.loadingKeys=[]}return t.prototype.startLoading=function(t){void 0===t&&(t="default"),this.loadingKeys.includes(t)||(this.loadingKeys.push(t),this.drawLoader())},t.prototype.stopLoading=function(t){void 0===t&&(t="default");var e=this.loadingKeys.indexOf(t);e<0||(this.loadingKeys.splice(e,1),this.drawLoader())},t.prototype.drawLoader=function(){this.$loader&&(this.loadingKeys.length?this.$loader.show():this.$loader.hide())},t}(),a=(t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}),r=jQuery,i=window.locationSelectorProps,c=i.itemClassName,s=i.selectClassName,l=i.loaderClassName,d=function(t){function e(e){var n=t.call(this)||this;return n.$elem=e,n.attach(),n.$loader=n.$elem.find(".".concat(l)),n.$elem.find(".".concat(s)).select2(),n}return a(e,t),e.prototype.onChange=function(t){var e=this,o=t.target;if(o){var a=r(o),i=a.closest(".".concat(c)),l=i.find(".".concat(s)),d=a.val(),u=Number(d);i.length&&u&&u==u&&(this.startLoading("location-selection"),i.nextAll(".".concat(c)).remove(),new URL(window.ajaxUrl).searchParams.append("action","location_selector_children"),n("location_selector_children",{parent:u}).then((function(t){if(e.stopLoading("location-selection"),!t.success)throw new Error(t.data);if(t.data.markup){var n=r(t.data.markup),o=n.find(".".concat(s));o.prop({class:l.prop("class"),name:l.prop("name")}),o.select2().find("option").filter((function(t,e){return""===e.value})).prop("value",d),i.after(n)}else e.$elem.trigger("granulated",u)})).catch((function(t){return console.error("An error occured: ",t)})))}},e.prototype.attach=function(){this.$elem.on("change",".".concat(s),this.onChange.bind(this))},e}(o),u=d;jQuery((function(t){t(".".concat(window.locationSelectorProps.containerClassName)).each((function(e,n){var o=t(n);o.data("location-selector",new u(o))}))}))}(),function n(o){var a=e[o];if(void 0!==a)return a.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,n),r.exports}(440)({})}();
//# sourceMappingURL=location-selector.js.map